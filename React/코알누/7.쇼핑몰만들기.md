# 7. 세번째 프로젝트 : 쇼핑몰 웹사이트 만들기

## 🧙‍♀️ 강의록

### 🟣 라우터 세팅

- 프로젝트 본격 시작 전 해야할 일 정리
    1. 전체 상품 페이지, 로그인, 상품상세페이지
    2. 네비게이션 바 만들기
    3. 전체 상품페이지에서는 전체 상품을 볼 수 있다
    4. 로그인 버튼 클릭 시 로그인 페이지 노출
    5. 상품디테일 클릭 시 로그인이 안되있을 경우 로그인 페이지 노출
    6. 로그인 완료 시 상품 디테일 페이지 노출
    7. 로그아웃 버튼 클릭 시 로그아웃
    8. 로그아웃 시 상품 디테일 페이지 볼 수 없으며 다시 로그인 페이지 노출
    9. 로그인 시 로그아웃 노출 로그아웃 시 로그인 노출
    10. 상품 검색 기능
- 본격 라우터 세팅!
    1. 리액트 라우터 설치
    2. index.js 라우터 적용
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/a9ec8544-53da-4ac8-b3ef-4c3eedc6268a/image.png)
        
    3. App.js에서 라우터 만들기
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/acc71608-dd3e-42d5-bcaa-12304eb7ae3e/image.png)
        

### 🟣 상단 메뉴 만들기

- 각 페이지에 동일하게 들어가지만 중복해서 넣지 않도록 라우터 위에 넣어줌
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/e6c92909-1456-4650-adb0-185c463c6ef8/image.png)
    
- 네비게이션 컴포넌트 만들기
- 네비게이션 제작
    
    [Get Started](https://docs.fontawesome.com/v5/web/setup/get-started)
    
    [[React] FontAwesome 사용하기](https://0lrlokr.tistory.com/141)
    
- 배열로 메뉴 만들기
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/7b0230c8-5e5b-4de3-9050-aef9f6ec4dd5/image.png)
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/e449fcc7-f1a1-412b-80c8-40cd1056acfd/image.png)
    
- 조건부 렌더링
    - 자바스크립트 조건문을 사용해 특정 조건이 참(true)일 때는 특정 컴포넌트를 렌더링, 그렇지 않을 때는 다른 컴포넌트 또는 아무것도 렌더링하지 않는다.
    - 방법
        1. if문사용
        2. 삼항연산자(조건? 참  : 거짓 )
        3. && 연산자 : 조건이 참일 때만 컴포넌트 렌더링 거짓일 때는 아무것도 렌더링 x
            
            ```jsx
            import 'bootstrap/dist/css/bootstrap.min.css';
            import { Route, Routes, useLocation } from 'react-router-dom';
            import './App.css';
            import NAV from './component/Nav';
            import BoxPage from './page/BoxPage';
            import HomePage from './page/HomePage';
            import Login from './page/Login';
            import ProductAll from './page/ProductAll';
            import ProductDetail from './page/ProductDetail';
            
            function App() {
              const location = useLocation();
              
              //location.pathname.startsWith(path) : 경로가 해당 문자열로 시작하는지 확인
              const showNav = ["/login", "/shop", "/product"].some(path => location.pathname.startsWith(path));
            
              return (
                <div className="App">
            	    **//조건부 렌더링
                  {showNav && <NAV />}**
                  <Routes>
                    <Route path="/" element={<HomePage/>}></Route>
                    <Route path="/BoxPage" element={<BoxPage/>}></Route>
                    <Route path="/login" element={<Login/>}></Route>
                    <Route path="/shop" element={<ProductAll/>}></Route>
                    <Route path="/product/:id" element={<ProductDetail/>}></Route>
                  </Routes>
                </div>
              );
            }
            
            export default App;
            
            ```
            

### 🟣 Json Server 소개

[npm: json-server](https://www.npmjs.com/package/json-server)

- Json Server : 데이터만 등록하면 api 호출 및 정보 노출 가능한 패키지
- json server 다운로드
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/1dee7efd-6d3a-4201-b496-3ae3b14d6c01/image.png)
    
- json 데이터 넣어주기
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/db77cff0-9a45-4992-b0eb-b7fbdc096ffd/image.png)
    
- json server 실행
    
    npm start를 통해 리액트를 실행시켜 주듯이 json-server도 시작을 해줘야함!
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/46d86d80-67f6-4389-b851-4a37b389a229/image.png)
    
- 어떻게하면 이 서버에서 데이터를 받을 수 있을까?
    
    npm start를 통해 리액트를 실행시켜 주듯이 json-server도 시작을 해줘야함!
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/46d86d80-67f6-4389-b851-4a37b389a229/image.png)
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/66e65ac6-fe06-4e5d-8629-1bd2fe092b4a/image.png)
    
- 서버 시작하기
    
    ```jsx
    $ npx json-server db.json
    npx json-server --watch db.json ---port 3000
    ```
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/8727d21b-99c0-40ca-9b9a-3e4274d7a8a6/image.png)
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/2f1538fb-df5b-46d3-a212-b58a741a190b/image.png)
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/cde3fbc4-9676-4b73-bde6-6d692d0408e1/image.png)
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/803391ce-707a-4e7a-af12-d32017b0f47b/image.png)
    

### 🟣 api 부르기

- api를 불러서 보여주자!
    - api 호출은 useEffect 사용
        
        ```jsx
        useEffect(() => {}, [])
        //useEffect는 2개의 인자를 갔는다. 하나는 함수~ 하나는 배열
        ```
        
        ```jsx
        const getProducts = async() => {
        	let url = `http://localhost:3000/products`;
        	let response = await fetch(url);  //url을 fetch해주세요!
        	let data = await response.json(); //response에서 json을 뽑아주세요!
        	console.log(data);
        }
        ```
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/6060ae05-aa6d-4a8a-bd4c-7233e421bb34/image.png)
        
    - 데이터를 UI에 보여주자!
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/15adb54b-be0d-44ed-89a4-815d054de221/image.png)
        
        - 카드 컴포넌트 만들기
            
            ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/88bc790d-b2d2-42d8-b3df-df8d7d6320de/image.png)
            

### 🟣 리액트 부트스트랩

- 리액트 부트스트랩으로 상품 레이아웃 잡기
    - hint
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/10fbcf13-4169-4f00-902d-791c90e99683/image.png)
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/70b03d21-70e2-43af-805e-dcb406a3a5d2/image.png)
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/fd71ed71-1b89-46c9-8225-1b51f2b4a16a/image.png)
        
    - 부트스트랩 layout : 한 줄에 몇개가 들어갈 수 있는지
        
        [Grid system | React Bootstrap](https://react-bootstrap.netlify.app/docs/layout/grid)
        
        - 한 줄의 최대 사이즈는 12!
        - 부트스트랩 container : 아이템이 가운데로 모이게 해줌!
            
            ```jsx
            import React from 'react';
            import Col from 'react-bootstrap/Col';
            import Container from 'react-bootstrap/Container';
            import Row from 'react-bootstrap/Row';
            import ProductCard from '../component/ProductCard';
            
            const ProductAll = () => {
              return (
                <div>
                  **<Container>
                    <Row>
                      <Col lg={3}>
                        <ProductCard />
                      </Col>
                      <Col lg={3}>
                        <ProductCard />
                      </Col>
                      <Col lg={3}>
                        <ProductCard />
                      </Col>
                      <Col lg={3}>
                        <ProductCard />
                      </Col>
                    </Row>
                  </Container>**
                </div>
              )
            }
            
            export default ProductAll
            
            ```
            
            ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/faaf0000-9363-414d-9bd4-1a5a4db2e0a9/image.png)
            
        - .map()을 이용해서 자동으로 그리기*수작업 x, 아이템의 갯수도 알 수 없으니까!)
            
            ```jsx
            import React, { useEffect, useState } from 'react';
            import Col from 'react-bootstrap/Col';
            import Container from 'react-bootstrap/Container';
            import Row from 'react-bootstrap/Row';
            import ProductCard from '../component/ProductCard';
            
            //데이터 fecth
            const ProductAll = () => {
              let [productList, setProductList] = useState([]);
              const getProducts = async() => {
                let url =`http://localhost:3000/products`;
                let response = await fetch(url);
                let data = await response.json();
                setProductList(data);
              };
            
            //데이터 불러오기
              useEffect(() => {
                getProducts();
              }, []);
            
              return (
                <div>
                  <Container>
                    <Row>
                      **{productList.map((item )=> (
                        <Col lg={3}>
                          <ProductCard item={item}/>
                        </Col>
                      ))}**
                    </Row>
                  </Container>
                </div>
              )
            }
            
            export default ProductAll
            
            ```
            
            ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/ef87d6e4-089a-4602-90df-a0d94d4f9780/image.png)
            
        - 각 카드에 아이템 데이터 담기
            
            ```jsx
            //ProductCard
            
            import React from 'react'
            
            const ProductCard = ({item}) => {
              return (
                <div className='item-wrap'>
                **//반드시 item이 있는지를 먼저 확인!!! '?'**
                  **<img className='item-img' src={item?.img} alt="item image" />
                  <img className='item-img' src={item?.hover} alt="item image" />
                  <div className='item-detail'>
                    <span className='item-tit'>{item?.title}</span>
                    <span className='item-price'>￦{item?.price.toLocaleString()}</span>
                    <div className='icon-wrap'>
                      <div className='icon-new'>{item.new == true? <img width={48} src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/75e1a0648703f.png" alt="new icon" /> : ""}</div>
                      <div className='icon-hot'>{item.hot == true? <img width={48} src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/1325bfe4d77a6.png" alt="hot icon" /> : ""}</div>
                      <div className='icon-choice'>{item.choice == true? <img width={48} src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/acedcf9400bb7.png" alt="choice icon" /> : ""}</div>
                    </div>
                  </div>**
                </div>
              )
            }
            
            export default ProductCard
            ```
            
            ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/a1672fe8-e7aa-4ed8-ad13-01583e818672/image.png)
            

### 🟣 Form과 Submit

- 리액트 부트스트랩 form 가져오기
    
    [Forms | React Bootstrap](https://react-bootstrap.netlify.app/docs/forms/overview)
    
    ```jsx
    import React from 'react';
    import Form from 'react-bootstrap/Form';
    
    const Login = () => {
      return (
    	  //가운데 정렬 리액트 부트스트랩 사용 시 : Container
        <div className="page-login">
          **<Form className="login-wrap">
            <Form.Group className="mb-3 input-wrap" controlId="formBasicEmail">
              <Form.Label>Email address</Form.Label>
              <Form.Control type="email" placeholder="Enter email" />
              {/* <Form.Text className="text-muted">
                We'll never share your email with anyone else.
              </Form.Text> */}
            </Form.Group>
    
            <Form.Group className="mb-3" controlId="formBasicPassword">
              <Form.Label>Password</Form.Label>
              <Form.Control type="password" placeholder="Password" />
            </Form.Group>
            <Form.Group className="mb-3" controlId="formBasicCheckbox">
              <Form.Check type="checkbox" label="Check me out" />
            </Form.Group>
            <button className="btn-login" type="submit">
              로그인
            </button>
          </Form>**
        </div>
      )
    }
    
    export default Login
    
    ```
    
- 간단 로그인 기능
    - 로그인 한 유저인지 아닌지를 알려주는 state
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/35a1cbd9-98ee-41be-a520-c960075ac731/image.png)
        
        ```jsx
        import 'bootstrap/dist/css/bootstrap.min.css';
        import { useState } from 'react';
        import { Route, Routes, useLocation } from 'react-router-dom';
        import './App.css';
        import NAV from './component/Nav';
        import BoxPage from './page/BoxPage';
        import HomePage from './page/HomePage';
        import Login from './page/Login';
        import ProductAll from './page/ProductAll';
        import ProductDetail from './page/ProductDetail';
        import ProductDetailPage from './page/ProductDetailPage';
        import RpsPage from './page/RpsPage';
        import WeatherAppPage from './page/WeatherAppPage';
        
        function App() {
          const location = useLocation();
          
          **//location.pathname.startsWith(path) : 경로가 해당 문자열로 시작하는지 확인
          const showNav = ["/login", "/shop", "/product"].some(path => location.pathname.startsWith(path));**
        
          //로그인 상태
          const [authenticaate, setAuthenticate]=useState(false);
        
          return (
            <div className="App">
              {showNav && <NAV />}
              <Routes>
                <Route path="/" element={<HomePage/>}></Route>
                <Route path="/BoxPage" element={<BoxPage/>}></Route>
                <Route path="/RpsPage" element={<RpsPage/>}></Route>
                <Route path="/WeatherAppPage" element={<WeatherAppPage/>}></Route>
                <Route path="/productDetailPage" element={<ProductDetailPage/>}></Route>
                <Route path="/login" element={<Login/>}></Route>
                <Route path="/shop" element={<ProductAll/>}></Route>
                <Route path="/product/:id" element={<ProductDetail/>}></Route>
              </Routes>
            </div>
          );
        }
        
        export default App;
        
        ```
        
    - form, button submit 하기
        - form : 입력받은 정보를 백엔드로 보내고 싶을 때 사용!
        - button: 타입이 submit이면 form에 onsubmit 이벤트를 사용해야한다!!!
            
            ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/07f0df32-7827-4e42-9e84-b218cf55e81a/image.png)
            
        - form 새로고침 방지
            
            ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/85212e6d-e7ec-4c82-928a-68fe5ba7b2f4/image.png)
            
            ```jsx
            import React from 'react';
            import Form from 'react-bootstrap/Form';
            
            const Login = () => {
              **const loginUser = (event) => {
                event.preventDefault();
                console.log("Login!!!!")
              };**
            
              return (
                <div className="page-login">
                  **<Form className="login-wrap" onSubmit={(event) => loginUser(event)}>**
                    <Form.Group className="mb-3 input-wrap" controlId="formBasicEmail">
                      {/* <Form.Label></Form.Label> */}
                      <Form.Control type="email" placeholder="Enter email" />
                    </Form.Group>
            
                    <Form.Group className="mb-3" controlId="formBasicPassword">
                      {/* <Form.Label></Form.Label> */}
                      <Form.Control type="password" placeholder="Password" />
                    </Form.Group>
                    <Form.Group className="mb-3" controlId="formBasicCheckbox">
                      <Form.Check type="checkbox" label="Check me out" />
                    </Form.Group>
                    <button className="btn-login" type="submit">
                      로그인
                    </button>
                  </Form>
                </div>
              )
            }
            
            export default Login
            ```
            

### 🟣 useNavigate로 홈페이지 돌아가기!

- setAuthenticate함수를 Login 컴포넌트에서 쓰는 방법
    - props로 보낸다! (함수도 props로 전달이 가능하다!)
        
        ```jsx
        ...
        
        function App() {
          const location = useLocation();
          
          //location.pathname.startsWith(path) : 경로가 해당 문자열로 시작하는지 확인
          const showNav = ["/login", "/shop", "/product"].some(path => location.pathname.startsWith(path));
        
          **//로그인 상태
          const [authenticate, setAuthenticate]=useState(false);
        
          useEffect(() => {
            console.log(authenticate);
          },[authenticate])**
        
          return (
            <div className="App">
              {showNav && <NAV />}
              <Routes>
                <Route path="/" element={<HomePage/>}></Route>
                <Route path="/BoxPage" element={<BoxPage/>}></Route>
                <Route path="/RpsPage" element={<RpsPage/>}></Route>
                <Route path="/WeatherAppPage" element={<WeatherAppPage/>}></Route>
                <Route path="/productDetailPage" element={<ProductDetailPage/>}></Route>
                **<Route path="/login" element={<Login setAuthenticate={setAuthenticate}/>}></Route>**
                <Route path="/shop" element={<ProductAll/>}></Route>
                <Route path="/product/:id" element={<ProductDetail/>}></Route>
              </Routes>
            </div>
          );
        }
        
        export default App;
        ```
        
    - 로그인 후 메인페이지 이동
        
        ```jsx
        import React from 'react';
        import Form from 'react-bootstrap/Form';
        **import { useNavigate } from 'react-router';**
        
        const Login = ({setAuthenticate}) => {
          **const navigate = useNavigate();**
          const loginUser = (event) => {
            event.preventDefault();
            setAuthenticate(true);
            **navigate('/shop')**
          };
        
          return (
            <div className="page-login">
              <Form className="login-wrap" onSubmit={(event) => loginUser(event)}>
                <Form.Group className="mb-3 input-wrap" controlId="formBasicEmail">
                  {/* <Form.Label></Form.Label> */}
                  <Form.Control type="email" placeholder="Enter email" />
                </Form.Group>
        
                <Form.Group className="mb-3" controlId="formBasicPassword">
                  {/* <Form.Label></Form.Label> */}
                  <Form.Control type="password" placeholder="Password" />
                </Form.Group>
                <Form.Group className="mb-3" controlId="formBasicCheckbox">
                  <Form.Check type="checkbox" label="Check me out" />
                </Form.Group>
                <button className="btn-login" type="submit">
                  로그인
                </button>
              </Form>
            </div>
          )
        }
        
        export default Login
        
        ```
        
        ```jsx
        ...
        
        function App() {
          const location = useLocation();
          
          //location.pathname.startsWith(path) : 경로가 해당 문자열로 시작하는지 확인
          const showNav = ["/login", "/shop", "/product"].some(path => location.pathname.startsWith(path));
        
          **//로그인 상태
          const [authenticate, setAuthenticate]=useState(false);
        
          useEffect(() => {
            console.log(authenticate);
          },[authenticate])**
        
          return (
            <div className="App">
              {showNav && <NAV />}
              <Routes>
                <Route path="/" element={<HomePage/>}></Route>
                <Route path="/BoxPage" element={<BoxPage/>}></Route>
                <Route path="/RpsPage" element={<RpsPage/>}></Route>
                <Route path="/WeatherAppPage" element={<WeatherAppPage/>}></Route>
                <Route path="/productDetailPage" element={<ProductDetailPage/>}></Route>
                **<Route path="/login" element={<Login setAuthenticate={setAuthenticate}/>}></Route>**
                <Route path="/shop" element={<ProductAll/>}></Route>
                <Route path="/product/:id" element={<ProductDetail/>}></Route>
              </Routes>
            </div>
          );
        }
        
        export default App;
        ```
        
    - 로그인 후 ‘로그아웃’ 텍스트 노출
        
        ```jsx
        function App() {
          const location = useLocation();
          
          //location.pathname.startsWith(path) : 경로가 해당 문자열로 시작하는지 확인
          const showNav = ["/login", "/shop", "/product"].some(path => location.pathname.startsWith(path));
        
          //로그인 상태
          const [authenticate, setAuthenticate]=useState(false);
        
          useEffect(() => {
            console.log(authenticate);
          },[authenticate])
        
          return (
            <div className="App">
              **{showNav && <NAV authenticate={authenticate}/>}**
              <Routes>
                <Route path="/" element={<HomePage/>}></Route>
                <Route path="/BoxPage" element={<BoxPage/>}></Route>
                <Route path="/RpsPage" element={<RpsPage/>}></Route>
                <Route path="/WeatherAppPage" element={<WeatherAppPage/>}></Route>
                <Route path="/productDetailPage" element={<ProductDetailPage/>}></Route>
                <Route path="/login" element={<Login setAuthenticate={setAuthenticate}/>}></Route>
                <Route path="/shop" element={<ProductAll/>}></Route>
                <Route path="/product/:id" element={<ProductDetail/>}></Route>
              </Routes>
            </div>
          );
        }
        
        export default App;
        ```
        
        ```jsx
        import { faUser } from "@fortawesome/free-regular-svg-icons";
        import { faMagnifyingGlass } from "@fortawesome/free-solid-svg-icons";
        import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
        import React from 'react';
        import { Link } from 'react-router-dom';
        
        **const Nav = ({authenticate}) => {**
          const menuList = ['NEW IN','PAPERWEIGHT','OBJECT','FRUITS','STATIONERY','CLASS KIT',]
          return (
            <div className='nav-wrap'>
                <div className='cont-wrap login-wrap'>
                    <Link to="/login" className='login-box'>
                      <FontAwesomeIcon icon={faUser} />
                      **<span>{authenticate ? '로그아웃' : '로그인'}</span>**
                    </Link>
                </div>
                <div className='cont-wrap logo-box'>
                  <img
                    width={150}
                    src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/b573f536e38c6.png"
                    alt="logo image" />
                </div>
                <div className='cont-wrap utility-box'>
                  <ul className='menu-box'>
                    {menuList.map(menu => <li>{menu}</li>)}
                  </ul>
                  <div className='search-box'>
                    <FontAwesomeIcon icon={faMagnifyingGlass} className='icon-search'/>
                    <input type="text" className='input-search' placeholder='제품 검색'/>
                  </div>
                </div>
            </div>
          )
        }
        
        export default Nav
        
        ```
        

### 🟣 Private Route

- 상품 디테일을 클릭했으나, 로그인이 안되있을 경우에는 로그인 페이지 노출 / 로그인 시 상품 디테일 노출
    - 폴더, 파일 생성
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/587c57a6-3e42-4da4-b515-324c6a135f1a/image.png)
        
        ```jsx
        import React from 'react';
        import { Navigate } from 'react-router-dom';
        import ProductDetailPage from '../page/ProductDetailPage';
        
        const PrivateRoute = ({authenticate}) => {
          return (authenticate == true ? <ProductDetailPage /> : <Navigate to='/login'/>)
        }
        
        export default PrivateRoute
        ```
        
    - 리다이렉트 : authenticate ? true : 디테일 페이지 / false : 로그인페이지
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/f76f7ad2-d92c-485a-bff1-05482da4517e/image.png)
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/5c303bd4-e3c8-434b-b7dd-d32deaeed4b1/image.png)
        
        ```jsx
        function App() {
          const location = useLocation();
          
          //location.pathname.startsWith(path) : 경로가 해당 문자열로 시작하는지 확인
          const showNav = ["/login", "/shop", "/product"].some(path => location.pathname.startsWith(path));
        
          //로그인 상태
          const [authenticate, setAuthenticate]=useState(false);
        
          useEffect(() => {
            console.log(authenticate);
          },[authenticate])
        
          return (
            <div className="App">
              {showNav && <NAV authenticate={authenticate}/>}
              <Routes>
                <Route path="/" element={<HomePage/>}></Route>
                <Route path="/BoxPage" element={<BoxPage/>}></Route>
                <Route path="/RpsPage" element={<RpsPage/>}></Route>
                <Route path="/WeatherAppPage" element={<WeatherAppPage/>}></Route>
                <Route path="/productDetailPage" element={<ProductDetailPage/>}></Route>
                <Route path="/login" element={<Login setAuthenticate={setAuthenticate}/>}></Route>
                <Route path="/shop" element={<ProductAll/>}></Route>
                **<Route path="/product/:id" element={<PrivateRoute authenticate={authenticate}/>}></Route>**
              </Routes>
            </div>
          );
        }
        
        export default App;
        
        ```
        
    - 상품 디테일 버튼 클릭 이벤트
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/e4c29249-3a7a-4faa-97c7-b065b1302b6c/image.png)
        
        ```jsx
        import React from 'react';
        import { useNavigate } from 'react-router';
        
        const ProductCard = ({item}) => {
          **const navigate = useNavigate();
          const showDetail = () => {
            navigate(`/product/${item.id}`)
          }**
          return (
            **<div className='item-wrap' onClick={showDetail}>**
              <img className='item-img' src={item?.img} alt="item image" />
              <img className='item-hover' src={item?.hover} alt="item hover image" />
              <div className='item-detail'>
                <span className='item-tit'>{item?.title}</span>
                <span className='item-price'>￦{item?.price.toLocaleString()}</span>
                <div className='icon-wrap'>
                  <div className='icon-new'>{item.new == true? <img width={48} src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/75e1a0648703f.png" alt="new icon" /> : ""}</div>
                  <div className='icon-hot'>{item.hot == true? <img width={48} src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/1325bfe4d77a6.png" alt="hot icon" /> : ""}</div>
                  <div className='icon-choice'>{item.choice == true? <img width={48} src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/acedcf9400bb7.png" alt="choice icon" /> : ""}</div>
                </div>
              </div>
            </div>
          )
        }
        
        export default ProductCard
        ```
        

### 🟣 상품 디테일 페이지 만들기

- fetch를 이용해 데이터를 불러오고 아이디값은 url 뒷부분 파라미터를 불러온다.
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/c5814c33-8e87-4046-87f3-ac2c84461132/image.png)
    
    ```jsx
    const ProductDetail = () => {
      const { id } = useParams();
      const getProductDetail = async() => {
        let url = `http://localhost:3000/products/${id}`;
        let response = await fetch(url);
        let data =  await response.json();
        setProduct(data);
      };
    
      useEffect(() => {
        getProductDetail();
      }, [])
    ```
    
- 불러온 데이터를 state로 저장!
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/7eb94fa8-1b75-406c-9f2a-bb27c7923152/image.png)
    
    ```jsx
    const ProductDetail = () => {
      const { id } = useParams();
      **const [product, setProduct] = useState(null);**
      const getProductDetail = async() => {
        let url = `http://localhost:3000/products/${id}`;
        let response = await fetch(url);
        let data =  await response.json();
        **setProduct(data);**
      };
    
      useEffect(() => {
        getProductDetail();
      }, [])
    ```
    
- 데이터 브라우저에 노출
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/6113111f-793f-4ccd-a111-5172f11d258b/image.png)
    
    ```jsx
    import React, { useEffect, useState } from 'react';
    import { Col, Container, Row } from 'react-bootstrap';
    import Dropdown from 'react-bootstrap/Dropdown';
    import DropdownButton from 'react-bootstrap/DropdownButton';
    import { useParams } from 'react-router';
    
    const ProductDetail = () => {
      const { id } = useParams();
      const [product, setProduct] = useState(null);
      const getProductDetail = async() => {
        let url = `http://localhost:3000/products/${id}`;
        let response = await fetch(url);
        let data =  await response.json();
        setProduct(data);
      };
    
      useEffect(() => {
        getProductDetail();
      }, [])
    
      return (
        <Container>
          <Row className="page-productDetail">
            <Col lg={6}>
              <div className="img-wrap">
                **<img src={product?.img} alt="product image" />**
              </div>
            </Col>
    
            <Col lg={6}>
              <div className="info-wrap">
    
                <div className="tit-icon-wrap">
                  <h4>{product?.title}</h4>
                  <div className='icon-wrap'>
                    <div className='icon-new'>{product?.new == true? <img width={48} src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/75e1a0648703f.png" alt="new icon" /> : ""}</div>
                    <div className='icon-hot'>{product?.hot == true? <img width={48} src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/1325bfe4d77a6.png" alt="hot icon" /> : ""}</div>
                    <div className='icon-choice'>{product?.choice == true? <img width={48} src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/acedcf9400bb7.png" alt="choice icon" /> : ""}</div>
                  </div>
                </div>
    
                <span className='item-price'>￦{product?.price.toLocaleString()}</span>
    
                <div className='item-size'>
                  <DropdownButton id="dropdown-basic-button" title="Dropdown button">
                    <Dropdown.Item href="#/action-1">Action</Dropdown.Item>
                    <Dropdown.Item href="#/action-2">Another action</Dropdown.Item>
                    <Dropdown.Item href="#/action-3">Something else</Dropdown.Item>
                  </DropdownButton>
                </div>
    
                <button className="btn-add">추가하기</button>
              </div>
            </Col>
          </Row>
        </Container>
      )
    }
    
    export default ProductDetail
    
    ```
    
    [[js] 숫자 천 단위로 콤마(,) 찍기 - toLocaleString()](https://computer-science-student.tistory.com/718)
    

### 🟣 상품 검색하기

- 검색어를 입력하고 엔터 클릭 시 링크 변경
    - **onKeyPress : 엔터를 포함한 모든 버튼 클릭 시 이벤트 실행**
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/6f4ee93d-205e-4702-9e0b-108ccb16cc1a/image.png)
        
    - 엔터키만 이벤트를 실행하고 싶을때!
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/1e526c50-f0e1-40ef-87ee-6a6373e336d1/image.png)
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/989bd9d9-33ce-4be0-85fe-fcc206f7039f/image.png)
        
        ```jsx
        import { faUser } from "@fortawesome/free-regular-svg-icons";
        import { faMagnifyingGlass } from "@fortawesome/free-solid-svg-icons";
        import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
        import React from 'react';
        import { Link } from 'react-router-dom';
        
        const Nav = ({authenticate}) => {
          const menuList = ['NEW IN','PAPERWEIGHT','OBJECT','FRUITS','STATIONERY','CLASS KIT',];
          **const search = (event) => {
            if(event.key === "Enter") {
              console.log("event key", event.key)
            }
          }**
          return (
            <div className='nav-wrap'>
                <div className='cont-wrap login-wrap'>
                    <Link to="/login" className='login-box'>
                      <FontAwesomeIcon icon={faUser} />
                      <span>{authenticate ? '로그아웃' : '로그인'}</span>
                    </Link>
                </div>
                <div className='cont-wrap logo-box'>
                  <img
                    width={150}
                    src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/b573f536e38c6.png"
                    alt="logo image" />
                </div>
                <div className='cont-wrap utility-box'>
                  <ul className='menu-box'>
                    {menuList.map(menu => <li>{menu}</li>)}
                  </ul>
                  <div className='search-box'>
                    <FontAwesomeIcon icon={faMagnifyingGlass} className='icon-search'/>
                    **<input type="text" onKeyPress={(event)=>search(event)} className='input-search' placeholder='제품 검색'/>**
                  </div>
                </div>
            </div>
          )
        }
        
        export default Nav
        
        ```
        
    - 입력한 검색어를 읽어와서 url을 바꿔준다.
        - 우리가 읽어오고 싶은 값이 event에 들어있다! **event.target.value 외우기!**
            
            ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/f9e15b84-9be6-48d2-9634-f1bd05caf1ab/image.png)
            
        - url 바꿔주기
            
            ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/0c03b357-afc1-448f-8ba4-ebc59ce4fb45/image.png)
            
            ```jsx
            import { faUser } from "@fortawesome/free-regular-svg-icons";
            import { faMagnifyingGlass } from "@fortawesome/free-solid-svg-icons";
            import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
            import React from 'react';
            **import { Link, useNavigate } from 'react-router-dom';**
            
            const Nav = ({authenticate}) => {
              const menuList = ['NEW IN','PAPERWEIGHT','OBJECT','FRUITS','STATIONERY','CLASS KIT',];
              **const navigate = useNavigate();**
              const search = (event) => {
                if(event.key === "Enter") {
                  let keyword = event.target.value;
                  **navigate(`shop/?q=${keyword}`)**
                }
              }
              return (
                <div className='nav-wrap'>
                    <div className='cont-wrap login-wrap'>
                        <Link to="/login" className='login-box'>
                          <FontAwesomeIcon icon={faUser} />
                          <span>{authenticate ? '로그아웃' : '로그인'}</span>
                        </Link>
                    </div>
                    <div className='cont-wrap logo-box'>
                      <img
                        width={150}
                        src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/b573f536e38c6.png"
                        alt="logo image" />
                    </div>
                    <div className='cont-wrap utility-box'>
                      <ul className='menu-box'>
                        {menuList.map(menu => <li>{menu}</li>)}
                      </ul>
                      <div className='search-box'>
                        <FontAwesomeIcon icon={faMagnifyingGlass} className='icon-search'/>
                        <input type="text" onKeyPress={(event)=>search(event)} className='input-search' placeholder='제품 검색'/>
                      </div>
                    </div>
                </div>
              )
            }
            
            export default Nav
            
            ```
            

### 🟣 상품 검색하기 2탄

- 쿼리에 있는 글자 가져와서 읽고 검색하기 (json-server 내장 기능 활용)
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/b5021045-4ae3-47d8-b9c0-d002382db53d/image.png)
    
    [useSearchParams v6.26.0](https://reactrouter.com/en/main/hooks/use-search-params)
    
    ```jsx
    import React, { useEffect, useState } from 'react';
    import Col from 'react-bootstrap/Col';
    import Container from 'react-bootstrap/Container';
    import Row from 'react-bootstrap/Row';
    **import { useSearchParams } from 'react-router-dom';**
    import ProductCard from '../component/ProductCard';
    
    const ProductAll = () => {
      let [productList, setProductList] = useState([]);
      **const [query, setQuery] = useSearchParams();**
      const getProducts = async() => {
        **let searchQuery = query.get("q");**
        let url =`http://localhost:3000/products`;
        let response = await fetch(url);
        let data = await response.json();
        setProductList(data);
      };
    
      useEffect(() => {
        getProducts();
      }, []);
    
      return (
        <div className="page-productAll">
          <Container>
            <Row>
              {productList.map((item )=> (
                <Col lg={3}>
                  <ProductCard item={item}/>
                </Col>
              ))}
            </Row>
          </Container>
        </div>
      )
    }
    
    export default ProductAll
    
    ```
    
    - q가 있으면 찾고 없으면 빈값으로 두기!
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/601e7fa0-c9df-42b4-94f5-401e516dd3d9/image.png)
        
    - **(중요) qeury값이 바뀔 때마다 useEffect가 실행되도록 수정!!!**
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/02193bff-bf8b-4b9b-9b70-690162948ed8/image.png)
        

### 🟣 로그아웃 기능 추가 (과제)

- **모든 상태관리는 App에서 진행하고 필요한 페이지에 prop으로 넘겨준다!**
- App에서 로그인 상태 관리, ‘Nav’에 상태를 전달
    
    ```jsx
    import 'bootstrap/dist/css/bootstrap.min.css';
    import { useEffect, useState } from 'react';
    import { Route, Routes, useLocation } from 'react-router-dom';
    import './App.css';
    import NAV from './component/Nav';
    import BoxPage from './page/BoxPage';
    import HomePage from './page/HomePage';
    import Login from './page/Login';
    import ProductAll from './page/ProductAll';
    import RpsPage from './page/RpsPage';
    import WeatherAppPage from './page/WeatherAppPage';
    import PrivateRoute from './route/PrivateRoute';
    
    function App() {
      const location = useLocation();
      
      const showNav = ["/login", "/shop", "/product"].some(path => location.pathname.startsWith(path));
    
      const [authenticate, setAuthenticate] = useState(false);
    
      useEffect(() => {
        console.log(authenticate);
      }, [authenticate]);
    
      return (
        <div className="App">
          **{showNav && <NAV authenticate={authenticate} setAuthenticate={setAuthenticate}/>}**
          <Routes>
            <Route path="/" element={<HomePage/>}></Route>
            <Route path="/BoxPage" element={<BoxPage/>}></Route>
            <Route path="/RpsPage" element={<RpsPage/>}></Route>
            <Route path="/WeatherAppPage" element={<WeatherAppPage/>}></Route>
            <Route path="/productDetail" element={<ProductDetail/>}></Route>
            <Route path="/login" element={<Login setAuthenticate={setAuthenticate}/>}></Route>
            <Route path="/shop" element={<ProductAll/>}></Route>
            <Route path="/product/:id" element={<PrivateRoute authenticate={authenticate}/>}></Route>
          </Routes>
        </div>
      );
    }
    
    export default App;
    ```
    
- Nav에서 isAuthenticate를 부모로부터 전달 받아 관리, 로그인/로그아웃 버튼 클릭 시 상태를 부모 컴포넌트로 전달하여 상태 업데이트
    
    ```jsx
    import { faUser } from "@fortawesome/free-regular-svg-icons";
    import { faMagnifyingGlass } from "@fortawesome/free-solid-svg-icons";
    import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
    import React, { useState } from 'react';
    import { useNavigate } from 'react-router-dom';
    
    const Nav = ({ authenticate, **setAuthenticate** }) => {
      **const [isAuthenticated, setIsAuthenticated] = useState(authenticate);**
      const menuList = ['NEW IN', 'PAPERWEIGHT', 'OBJECT', 'FRUITS', 'STATIONERY', 'CLASS KIT'];
      const navigate = useNavigate();
    
      const search = (event) => {
        if(event.key === "Enter") {
          let keyword = event.target.value;
          navigate(`shop/?q=${keyword}`);
        }
      };
    
      **const handleLoginLogoutClick = () => {
        if (isAuthenticated) {
          alert("로그아웃 되었습니다.");
          setAuthenticate(false);
        } else {
          navigate('/login');
        }
      };**
    
      **// 부모로부터 상태 업데이트 시, 상태를 동기화합니다.
      useEffect(() => {
        setIsAuthenticated(authenticate);
      }, [authenticate]);**
    
      return (
        <div className='nav-wrap'>
            <div className='cont-wrap login-wrap'>
                **<div className='login-box' onClick={handleLoginLogoutClick}>**
                  <FontAwesomeIcon icon={faUser} />
                  <span>{isAuthenticated ? '로그아웃' : '로그인'}</span>
                </div>
            </div>
            <div className='cont-wrap logo-box'>
              <img
                width={150}
                src="https://cdn.imweb.me/upload/S20200607eef2419d78f7d/b573f536e38c6.png"
                alt="logo image" />
            </div>
            <div className='cont-wrap utility-box'>
              <ul className='menu-box'>
                {menuList.map(menu => <li key={menu}>{menu}</li>)}
              </ul>
              <div className='search-box'>
                <FontAwesomeIcon icon={faMagnifyingGlass} className='icon-search'/>
                <input type="text" onKeyPress={(event)=>search(event)} className='input-search' placeholder='제품 검색'/>
              </div>
            </div>
        </div>
      );
    }
    
    export default Nav;
    ```
    

### 🟣 my json server로 데이터 등록하기

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/11e3cf0c-12fd-486e-a199-4a8def243cc2/image.png)

1. 데이터를 위한 레파지토리 만들기
2. local 링크 수정 ⇒ [https://my-json-server.typicode.com/**<your-username>/<your-repo>**](https://my-json-server.typicode.com/typicode/demo) 
    - my json server가 알아서 db.json을 읽고 데이터를 넣어줌!
3. 새로 만든 프로젝트 깃허브에 올려주기!
    
    ```jsx
    git init  //이니셜라이즈
    git add .
    git commit -m ~
    
    //연결고리 만들어주기!(레파지토리에 기재되어있음)
    git remote add origin https://github.com/sooozi/data-mixture.git
    
    git push origin ~
    ```
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/6d65bc3e-af25-45ef-81b5-1c38c6d72006/image.png)
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/00ca2a61-36f8-4932-bbfd-ebcb5a59151d/image.png)
    
4. 새로 만든 프로젝트 nelify로 배포해주기!
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/5870858c-805d-46bb-9149-3aeb8c2d145d/image.png)
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/90c67c6c-ba4c-4edf-a3a6-b392665cd9a7/image.png)
    
    [New CI=true build configuration, "Treating warnings as errors because process.env.CI = true"](https://answers.netlify.com/t/new-ci-true-build-configuration-treating-warnings-as-errors-because-process-env-ci-true/14434)