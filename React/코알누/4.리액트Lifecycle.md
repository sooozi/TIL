# 4. ë¦¬ì•¡íŠ¸ Lifecycle

## ğŸ§™â€â™€ï¸ ê°•ì˜ë¡

### ğŸŸ£ ë¦¬ì•¡íŠ¸ Lifecycle

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/85a3aa84-405a-4590-87eb-576f093c88b4/image.png)

 : ë¦¬ì•¡íŠ¸ëŠ” 3ê°œì˜ lifecycleì„ ê°€ì§€ê³  ìˆë‹¤.

- Mounting : ì»´í¬ë„ŒíŠ¸ê°€ ì‹œì‘ë  ë•Œ
    - constructorê°€ ì²«ë²ˆì§¸ë¡œ ì‹¤í–‰ë˜ëŠ” lifecycle í•¨ìˆ˜, ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤í–‰ë  ë•Œ(ì•±ì´ ì‹œì‘ë˜ë©´) constructor ë¨¼ì € í˜¸ì¶œí•˜ê³  ë“¤ì–´ê°! ì•±ì´ ì‹¤í–‰ë˜ìë§ˆì í•´ì¤˜ì•¼ í•˜ëŠ” ì‘ì—…ë“¤ì„ constructorì— ë„£ê¸°!
    - render : UI ê·¸ë ¤ì£¼ëŠ” í•¨ìˆ˜
    - componentDidMount : UI ì„¸íŒ…ì´ ì™„ë£Œë˜ë©´ ì•Œë ¤ì¤Œ
    
    ```jsx
    import React, { Component } from 'react';
    import BoxClass from './component/BoxClass';
    
    export default class BoxClassPage extends Component {
        constructor(props) {
            **console.log("constructor");**
            super(props)
            this.state= {
                counter: 0,
                num: 1,
                value: 0,
            };
        }
    
        increase = () => {
            this.setState({
                counter: this.state.counter + 1,
                value: this.state.value + 1
            })
        }
    
        **componentDidMount(){
            console.log("componentDidMount");
        }**
    
        render() {
            **console.log("render");**
            return (
            <div>
                <span>{this.state.counter}</span>
                <button onClick={this.increase}>Click ğŸ‘†</button>
                <BoxClass num={this.state.value} />
            </div>
            )
        }
    }
    
    ```
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/7b323da4-dd14-4726-9596-c50f96efe480/image.png)
    
    1. constructor í•¨ìˆ˜ì—ì„œëŠ” ë­˜í•˜ë©´ ë ê¹Œ?
        
        ```jsx
        constructor(props) {
                ****console.log("constructor");
                super(props)
                **this.state= {
                    counter: 0,
                    num: 1,
                    value: 0,
                };**
            }
        ```
        
        - stateë¥¼ ë§Œë“ ë‹¤!
        - **this.state** : ë³¸ê²© state ë§Œë“¤ê¸°! / ë°˜ë“œì‹œ this.stateê³¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼í•¨!
    2. render
        
        ```jsx
         render() {
                **console.log("render");**
                return (
                <div>
                    <span>{this.state.counter}</span>
                    <button onClick={this.increase}>Click ğŸ‘†</button>
                    <BoxClass num={this.state.value} />
                </div>
                )
            }
        ```
        
        - UI ê·¸ë¦¬ëŠ” ê²ƒ
    3. componentDidMount
        
        ```jsx
        **componentDidMount(){
        		//API ì½œ
                console.log("componentDidMount");
            }**
        ```
        
        - API í˜¸ì¶œ ì‘ì—…ë“¤ì„ ì£¼ë¡œ í•¨! (UI ê·¸ë ¤ì£¼ê³  ë‚œ í›„ í˜¸ì¶œ / UIê°€ ìˆê³  ë‚œ í›„ ë°ì´í„°ê°€ ë“¤ì–´ì™€ì•¼í•˜ë‹ˆê¹Œ)
- Updating : stateê°€ ì—…ë°ì´íŠ¸ë˜ê³  UIì—…ë°ì´íŠ¸ë  ë•Œ
    1. ì¼€ì´ìŠ¤ : stateê°€ ì—…ë°ì´íŠ¸ / propsê°€ ì—…ë°ì´íŠ¸ / ì—…ë°ì´íŠ¸ê°€ ê°•ìš”ë˜ëŠ” ê¸°íƒ€ ìƒí™©ë“¤
    2. render
    3. componentDidUpdate : ìµœì‹  ì—…ë°ì´íŠ¸ëœ state ê°’ì„ ë°›ì•„ë³¼ ìˆ˜ ìˆìŒ (state ì—…ë°ì´íŠ¸ ì´í›„ ì‘ì—…ì€ í•´ë‹¹ í•¨ìˆ˜ì—ì„œ ì‘ì—…í•˜ì!)
        
        ```jsx
        import React, { Component } from 'react';
        import BoxClass from './component/BoxClass';
        
        export default class BoxClassPage extends Component {
            constructor(props) {
                console.log("constructor");
                super(props)
                this.state= {
                    counter: 0,
                    num: 1,
                    value: 0,
                };
            }
        
            increase = () => {
                this.setState({
                    counter: this.state.counter + 1,
                    value: this.state.value + 1
                })
                console.log("increase function", this.state)
            }
        
            componentDidMount(){
                console.log("componentDidMount");
            }
        
            componentDidUpdate(){
                console.log("componentDidUpdate", this.state)
            }
        
            render() {
                console.log("render");
                return (
                <div>
                    <span>{this.state.counter}</span>
                    <button onClick={this.increase}>Click ğŸ‘†</button>
                    <BoxClass num={this.state.value} />
                </div>
                )
            }
        }
        
        ```
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/7fc08744-e9c9-4474-98eb-d02fe7fcb30b/image.png)
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/c7cac5bb-2f14-4f3e-b6f9-bf7ae0caf7c9/image.png)
        
        ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/6199b453-e9c2-4bcc-8062-82197589d2ca/image.png)
        
- Unmounting : ì»´í¬ë„ŒíŠ¸(ì•±)ê°€ ì¢…ë£Œë  ë•Œ (ë§ì´ ì‚¬ìš©ë˜ì§€ëŠ” ì•ŠìŒ)
    
    ```jsx
    import React, { Component } from 'react';
    import BoxClass from './component/BoxClass';
    
    export default class BoxClassPage extends Component {
        constructor(props) {
            console.log("constructor");
            super(props)
            this.state= {
                counter: 0,
                num: 1,
                value: 0,
            };
        }
    
        increase = () => {
            this.setState({
                counter: this.state.counter + 1,
                value: this.state.value + 1
            })
            console.log("increase function", this.state)
        }
    
        **componentDidMount(){
            console.log("componentDidMount");
        }**
    
        componentDidUpdate(){
            console.log("componentDidUpdate", this.state)
        }
    
        render() {
            console.log("render");
            return (
            <div>
                <span>{this.state.counter}</span>
                <button onClick={this.increase}>Click ğŸ‘†</button>
                {this.state.counter < 3 && <BoxClass num={this.state.value} />}
            </div>
            )
        }
    }
    ```
    
    ```jsx
    import React, { Component } from 'react'
    
    export default class BoxClass extends Component {
      **componentWillUnmount(){
        console.log("byebye")
      }**
      render() {
        return (
          <div>
            <p>BoxClass : {this.props.num}</p>
          </div>
        )
      }
    }
    ```
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/a2bf70a1-3550-49a7-bc05-9c6b573dbf07/image.png)
    

[[React] Classí˜• ì»´í¬ë„ŒíŠ¸ì˜ ë¼ì´í”„ì‚¬ì´í´(Life Cycle)](https://velog.io/@khpark/React-Classí˜•-ì»´í¬ë„ŒíŠ¸ì˜-ë¼ì´í”„ì‚¬ì´í´Life-Cycle)

### ğŸŸ£ function ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ì–´ë–»ê²Œ ì“°ë‚˜?

ìœ„ ì„¤ëª…ì˜ lifecycleì€ ì˜¤ì§!!! class ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤! 

function ë²„ì „ì˜ lifecycle í•¨ìˆ˜ëŠ” ë”°ë¡œ ìˆë‹¤! ã….ã…

useEffect(ë¦¬ì•¡íŠ¸ í›…)ê°€ lifecycleì˜ ì—­í• ì„ ì–´ëŠì •ë„ ëŒ€ì‹ í•´ì¤€ë‹¤!

```jsx
import React, { useState, useEffect } from 'react';

const BtnPage = () => {
  const [counter, setCounter] = useState(0);
  const increase = () => {
    setCounter(counter + 1);
  }
  //useEffectëŠ” ë§¤ê°œë³€ìˆ˜ 2ê°œë¥¼ ë°›ëŠ”ë‹¤. (í•¨ìˆ˜, ë°°ì—´)
  **useEffect(() => {
    console.log("useEffect1 fire");
  }, [])**
  return (
    <div className="App">
      {console.log("render")}
      <span>{counter}</span>
      <button onClick={increase}>Click ğŸ‘†</button>
    </div>
  );
}

export default BtnPage

```

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/b656dd65-4a52-4fb2-ac89-76e29dcdd075/image.png)

**âœ… useEffectëŠ” componentDidMout()ë¥¼ ëŒ€ì‹ í•´ì¤€ë‹¤.**

api í˜¸ì¶œ ì‘ì—…ì„ useEffectì—ì„œ í•œë‹¤.

```jsx
import React, { useState, useEffect } from 'react';

const BtnPage = () => {
  const [counter, setCounter] = useState(0);
  const increase = () => {
    setCounter(counter + 1);
  }
  //useEffectëŠ” ë§¤ê°œë³€ìˆ˜ 2ê°œë¥¼ ë°›ëŠ”ë‹¤. (í•¨ìˆ˜, ë°°ì—´)
  useEffect(() => {
    console.log("useEffect1 fire");
  }, [])

  **useEffect(() => {
    console.log("useEffect2 fire");
  }, [counter])**
  
  return (
    <div className="App">
      {console.log("render")}
      <span>{counter}</span>
      <button onClick={increase}>Click ğŸ‘†</button>
    </div>
  );
}

export default BtnPage

```

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/b517ff03-0801-4432-90e1-d70a9097c51a/image.png)

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/793cd847-f03d-4552-8b01-4737b8d4cd33/image.png)

**âœ… ë°°ì—´ì•ˆì— ê°’ì´ ë“¤ì–´ê°€ë©´ useEffectëŠ” componentDidUpdateë¥¼ ì»¤ë²„í•œë‹¤!**

ë°°ì—´ì— stateê°’ì„ ë„£ì–´ë‘ë©´ ë°°ì—´ stateê°’ì´ ì™€ë„ã„´íˆ ì—…ë°ì´íŠ¸ë˜ë©´ ì•Œë ¤ì¤Œ! (ì£¼ì‹œ ì¤‘!!!)

ë°°ì—´ : ê°’ì„ ì—¬ëŸ¬ê°œ ë„£ì„ ìˆ˜ ìˆë‹¤.

**âœ… ë°°ì—´ì— ë“¤ì–´ìˆëŠ” ê°’ ì¤‘ í•˜ë‚˜ë¼ë„ state ê°’ì´ ë³€í•˜ë©´ useEffectê°€ í˜¸ì¶œ!**