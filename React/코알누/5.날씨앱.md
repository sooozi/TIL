# 5. ë‘ë²ˆì§¸ í”„ë¡œì íŠ¸: ë‚ ì”¨ì•± ë§Œë“¤ê¸°

## ğŸ§™â€â™€ï¸ ê°•ì˜ë¡

[](https://home.openweather.co.uk/)

[Current weather data](https://openweathermap.org/current)

### ğŸŸ£ í”„ë¡œì íŠ¸ ì‹œì‘ ì „ ì§„í–‰ìˆœì„œ ìƒê°í•´ë³´ê¸°

1. ì•±ì´ ì‹¤í–‰ë˜ë©´ í˜„ì¬ ìœ„ì¹˜ê¸°ë°˜ì˜ ë‚ ì”¨ ë…¸ì¶œ
2. ë‚ ì”¨ ì •ë³´ : ë„ì‹œ, ì„­ì”¨, í™”ì”¨, ë‚ ì”¨ìƒíƒœ
3. 5ê°œì˜ ë²„íŠ¼ (1ê°œ í˜„ì¬ìœ„ì¹˜, 4ê°œ ë‹¤ë¥¸ë„ì‹œ : í˜¸ì£¼, ë…ì¼, í”„ë¼í•˜, ë°©ì½•)
4. ë„ì‹œë²„íŠ¼ í´ë¦­ ì‹œ ë„ì‹œë³„ ë‚ ì§œ ë…¸ì¶œ
5. í˜„ì¬ ìœ„ì¹˜ ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤ì‹œ í˜„ì¬ ìœ„ì¹˜ ë‚ ì”¨ ë…¸ì¶œ
6. ë°ì´í„°ë¥¼ ë“¤ê³  ì˜¤ëŠ” ë™ì•ˆ â€˜ë¡œë”© ìŠ¤í”¼ë„ˆâ€™ ë…¸ì¶œ

### ğŸŸ£ í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°

[W3Schools.com](https://www.w3schools.com/html/html5_geolocation.asp)

- **HTMLÂ Geolocation API**
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/fa6c227f-28a9-4770-b6af-8daa06198047/image.png)
    

**âœ…** positonì€ ìµëª…í•¨ìˆ˜ë¡œ ë„£ì–´ì¤Œ / ë§¤ê°œë³€ìˆ˜ ë°˜ë“œì‹œ í™•ì¸!

```jsx
import { useEffect } from 'react';
import './App.css';

function App() {

  **const getCurrentLocation = () => {
    navigator.geolocation.getCurrentPosition((position) => {
      let lat = position.coords.latitude;
      let lon = position.coords.longitude;
      console.log(`í˜„ì¬ìœ„ì¹˜ ${lat}, ${lon} `)
    });
  }
  
  useEffect(() => {
    getCurrentLocation();
  }, [])**
  
  return (
    <div className="App">
    </div>
  );
}

export default App;

```

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/bdf40372-705e-4e32-94c5-4196c9c3b27a/image.png)

ğŸ‘© ê³¼ì œ : api ì •ë³´ë¡œ í˜„ì¬ìœ„ì¹˜ ë‚ ì”¨ ë¶ˆëŸ¬ì˜¤ê¸°

```jsx
import axios from 'axios';
import { useEffect } from 'react';
import './App.css';

function App() {
  const API_KEY = process.env.REACT_APP_WEATHER_KEY;

  const getCurrentLocation = () => {
    navigator.geolocation.getCurrentPosition((position) => {
      let lat = position.coords.latitude;
      let lon = position.coords.longitude;
      getWeather(lat, lon);
    });
  }
  const getWeather = async(lat, lon) => {
    try {
      const link = await axios.get(
        `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`
      
      )
      console.log(link)
    } catch(err) {
      console.error(err)
    }
  }

  useEffect(() => {
    getCurrentLocation();
  }, [])
  return (
    <div className="App">

    </div>
  );
}

export default App;

```

### ğŸŸ£ í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°_api data

```jsx
import { useEffect } from 'react';
import './App.css';

function App() {
  const API_KEY = process.env.REACT_APP_WEATHER_KEY;

  const getCurrentLocation = () => {
    navigator.geolocation.getCurrentPosition((position) => {
      let lat = position.coords.latitude;
      let lon = position.coords.longitude;
      getWeatherByCurrentLocation(lat, lon);
    });
  }

  const getWeatherByCurrentLocation = async(lat, lon)  => {
    let url = `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;
    let response = await fetch(url);
    let data = await response.json();
    console.log(data);
  }
  //ë‚´ê°€ ë¶ˆëŸ¬ì˜¨ api
  // const getWeather = async(lat, lon) => {
  //   try {
  //     const link = await axios.get(
  //       `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`
      
  //     )
  //     console.log(link)
  //   } catch(err) {
  //     console.error(err)
  //   }
  // }

  useEffect(() => {
    getCurrentLocation();
  }, [])
  return (
    <div className="App">

    </div>
  );
}

export default App;
```

ì˜¤ë¥˜ í•´ê²°

[OpenWeatherMap API 401 error](https://projectlog.tistory.com/27)

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/681aabec-185e-44d0-b64b-3d352bfbfae8/abd9e07c-27a5-4d51-95c0-ef433e925c06/image.png)

### ğŸŸ£ í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°_api data ë…¸ì¶œ

```jsx
import 'bootstrap/dist/css/bootstrap.min.css';
import { useEffect, useState } from 'react';
import './App.css';
import WeatherBox from './component/WeatherBox';
import WeatherButton from './component/WeatherButton';

function App() {
  const API_KEY = process.env.REACT_APP_WEATHER_KEY;
  const [weather, setWeather] = useState(null);
  const cities = ["Australia", "Germany", "Bangkok", "Prague"]

  const getCurrentLocation = () => {
    navigator.geolocation.getCurrentPosition((position) => {
      let lat = position.coords.latitude;
      let lon = position.coords.longitude;
      getWeatherByCurrentLocation(lat, lon);
    });
  }

  const getWeatherByCurrentLocation = async(lat, lon)  => {
    let url = `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;
    let response = await fetch(url);
    let data = await response.json();
    setWeather(data);
  }

  //ë‚´ê°€ ë¶ˆëŸ¬ì˜¨ api
  // const getWeather = async(lat, lon) => {
  //   try {
  //     const link = await axios.get(
  //       `http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`
  //     )
  //     console.log(link)
  //   } catch(err) {
  //     console.error(err)
  //   }
  // }

  useEffect(() => {
    getCurrentLocation();
  }, [])
  return (
    <div className="App">
      <div className="container">
        <WeatherBox weather={weather}/>
        <WeatherButton cities={cities}/>
      </div>
    </div>
  );
}

export default App;
```

```jsx
import React from 'react';
import { Button } from 'react-bootstrap';

const WeatherButton = ({cities}) => {
  return (
    <div>
      <Button variant="secondary">Secondary</Button>
      {cities.map((item) => (
        <Button variant="secondary">{item}</Button>
      ))}
    </div>
  )
}

export default WeatherButton
```

```jsx
import React from 'react';

const WeatherBox = ({weather}) => { //destructure
    console.log(weather);
    return (
        <div>
            {/*ì‚¼í•­ì—°ì‚°ì‹ : ì—°ì‚°ì‹ì´ ì—†ìœ¼ë©´ ì²˜ìŒ ê°’ì´ nullì´ë¼ ë¹„ë™ê¸°ì²˜ë¦¬ë˜ì–´ ì˜¤ë¥˜ê°€ ëœ¸!
            weatherê°€ ìˆìœ¼ë©´ ë°ì´í„°ë¥¼ ë³´ì—¬ì£ !*/}
            <div>{weather?.name}</div> 
            <h2>{weather?.main.temp}â„ƒ / {weather?.main.temp * 1.8 + 32}â„‰</h2>
            <h3>{weather?.weather[0].description}</h3>
        </div>
    )
}

export default WeatherBox
```

[Introduction | React Bootstrap](https://react-bootstrap.netlify.app/docs/getting-started/introduction)

[[React] APIë¡œ ë‚ ì”¨ ì•± ë§Œë“¤ê¸° 2(OpenWeather API ì‚¬ìš©)](https://conquer-it.tistory.com/195)

[React - propsì™€ data destructuring](https://velog.io/@hyeseong/React-props-data-destructuring)

http, https (api ë°ì´í„° ë¶ˆëŸ¬ì˜¬ ë•Œ) ì—ëŸ¬ ë°œìƒ!

[[react] Mixed Content: The page at 'https://...' was loaded over HTTPS, but ... ì˜¤ë¥˜ í•´ê²°í•˜ê¸°](https://velog.io/@zzangsubin/react-Mixed-Content-The-page-at-https...-was-loaded-over-HTTPS-but-...-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0)

### ğŸŸ£ ë²„íŠ¼ ë³´ì—¬ì£¼ê¸°

### ğŸŸ£ ë„ì‹œë³„ ë‚ ì”¨ ê°€ì ¸ì˜¤ê¸°

reactëŠ” í•œìª½ìœ¼ë¡œë§Œ ë°ì´í„°ë¥¼ ë³´ë‚´ì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— App.jsê°€ ëª¨ë“  ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆê³  ë‹¤ë¥¸ í˜ì´ì§€ì— ë°ì´í„°ë¥¼ ë¿Œë ¤ì¤€ë‹¤!